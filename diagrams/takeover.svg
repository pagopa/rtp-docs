<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2965.625px" preserveAspectRatio="none" style="width:1840px;height:2965px;" version="1.1" viewBox="0 0 1840 2965" width="1840.625px" zoomAndPan="magnify"><title>RTP Activation API: POST /activations/takeover/{otp}</title><defs><linearGradient id="g1h8lp2igi9bm30" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#FFFFFF"/></linearGradient><filter height="300%" id="f1h8lp2igi9bm3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0833"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.1667" dy="4.1667" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter><linearGradient id="g1h8lp2igi9bm31" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#4DABF5"/><stop offset="100%" stop-color="#2196F3"/></linearGradient><linearGradient id="g1h8lp2igi9bm32" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#B052C0"/><stop offset="100%" stop-color="#9C27B0"/></linearGradient></defs><g><rect fill="url(#g1h8lp2igi9bm30)" height="58.6528" rx="4.1667" ry="4.1667" style="stroke:#CCCCCC;stroke-width:1.0417;" width="681.6996" x="585.7147" y="20.8333"/><text fill="#2196F3" font-family="Verdana" font-size="20.8333" font-weight="bold" lengthAdjust="spacing" textLength="648.3663" x="602.3814" y="58.4452">RTP Activation API: POST /activations/takeover/{otp}</text><g><title>**Activation Service**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="2585.6323" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="832.6385" y="261.5194"/></g><g><title>**Old Service Provider**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="116.4083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1280.0812" y="1112.6607"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="532.4443"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="633.6609"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="734.8775"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="900.2441"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="186.5499" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="1569.3522"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="2000.177"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="2265.2852"/></g><rect fill="url(#g1h8lp2igi9bm30)" filter="url(#f1h8lp2igi9bm3)" height="1873.3826" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1792.7124" x="30.2083" y="966.4775"/><rect fill="url(#g1h8lp2igi9bm30)" filter="url(#f1h8lp2igi9bm3)" height="759.6497" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1130.1809" x="682.3232" y="1011.8774"/><rect fill="#B3FFB3" filter="url(#f1h8lp2igi9bm3)" height="250.5249" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="698.5433" x="692.7399" y="1128.2857"/><rect fill="url(#g1h8lp2igi9bm30)" filter="url(#f1h8lp2igi9bm3)" height="126.825" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="677.71" x="703.1565" y="1244.694"/><path d="M703.1565,1282.8023 L1380.8665,1282.8023 L1380.8665,1367.3523 A4.1667,4.1667 0 0 1 1376.6998,1371.519 L707.3232,1371.519 A4.1667,4.1667 0 0 1 703.1565,1367.3523 L703.1565,1282.8023" fill="#FFE0B3" style="stroke:none;stroke-width:1.0417;"/><rect fill="#FFCDD2" filter="url(#f1h8lp2igi9bm3)" height="370.8415" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1098.9309" x="703.1565" y="1393.394"/><path d="M30.2083,1919.7937 L1822.9207,1919.7937 L1822.9207,2180.7353 A4.1667,4.1667 0 0 1 1818.7541,2184.9019 L34.375,2184.9019 A4.1667,4.1667 0 0 1 30.2083,2180.7353 L30.2083,1919.7937" fill="#FFFFE0" style="stroke:none;stroke-width:1.0417;"/><path d="M30.2083,2184.9019 L1822.9207,2184.9019 L1822.9207,2445.8435 A4.1667,4.1667 0 0 1 1818.7541,2450.0102 L34.375,2450.0102 A4.1667,4.1667 0 0 1 30.2083,2445.8435 L30.2083,2184.9019" fill="#FFA500" style="stroke:none;stroke-width:1.0417;"/><path d="M30.2083,2450.0102 L1822.9207,2450.0102 L1822.9207,2835.6934 A4.1667,4.1667 0 0 1 1818.7541,2839.86 L34.375,2839.86 A4.1667,4.1667 0 0 1 30.2083,2835.6934 L30.2083,2450.0102" fill="#8B0000" style="stroke:none;stroke-width:1.0417;"/><rect fill="url(#g1h8lp2igi9bm30)" filter="url(#f1h8lp2igi9bm3)" height="169.7083" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="670.4539" x="302.0833" y="2495.4102"/><rect fill="url(#g1h8lp2igi9bm30)" filter="url(#f1h8lp2igi9bm3)" height="152.8666" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1153.5594" x="302.0833" y="2679.7017"/><g><title>**New Service Provider**</title><rect fill="#000000" fill-opacity="0.00000" height="2663.9323" width="8.3333" x="397.2382" y="193.6361"/><line style="stroke:#CCCCCC;stroke-width:1.0417;stroke-dasharray:5.0,5.0;" x1="401.0417" x2="401.0417" y1="193.6361" y2="2857.5684"/></g><g><title>**Activation Service**</title><rect fill="#000000" fill-opacity="0.00000" height="2663.9323" width="8.3333" x="833.6802" y="193.6361"/><line style="stroke:#CCCCCC;stroke-width:1.0417;stroke-dasharray:5.0,5.0;" x1="837.5315" x2="837.5315" y1="193.6361" y2="2857.5684"/></g><g><title>**Old Service Provider**</title><rect fill="#000000" fill-opacity="0.00000" height="2663.9323" width="8.3333" x="1281.1228" y="193.6361"/><line style="stroke:#CCCCCC;stroke-width:1.0417;stroke-dasharray:5.0,5.0;" x1="1284.5042" x2="1284.5042" y1="193.6361" y2="2857.5684"/></g><g><title>**Database**</title><rect fill="#000000" fill-opacity="0.00000" height="2663.9323" width="8.3333" x="1423.0296" y="193.6361"/><line style="stroke:#CCCCCC;stroke-width:1.0417;stroke-dasharray:5.0,5.0;" x1="1426.6998" x2="1426.6998" y1="193.6361" y2="2857.5684"/></g><g class="participant participant-head" data-participant="NewSP"><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="150.7263" x="322.9167" y="180.5949">New Service Provider</text><ellipse cx="401.4048" cy="100.3194" fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" rx="8.3333" ry="8.3333" style="stroke:#2196F3;stroke-width:1.0417;"/><path d="M401.4048,108.6528 L401.4048,136.7778 M387.8632,116.9861 L414.9465,116.9861 M401.4048,136.7778 L387.8632,152.4028 M401.4048,136.7778 L414.9465,152.4028" fill="none" filter="url(#f1h8lp2igi9bm3)" style="stroke:#2196F3;stroke-width:1.0417;"/></g><g class="participant participant-tail" data-participant="NewSP"><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="150.7263" x="322.9167" y="2879.5105">New Service Provider</text><ellipse cx="401.4048" cy="2901.9267" fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" rx="8.3333" ry="8.3333" style="stroke:#2196F3;stroke-width:1.0417;"/><path d="M401.4048,2910.26 L401.4048,2938.385 M387.8632,2918.5933 L414.9465,2918.5933 M401.4048,2938.385 L387.8632,2954.01 M401.4048,2938.385 L414.9465,2954.01" fill="none" filter="url(#f1h8lp2igi9bm3)" style="stroke:#2196F3;stroke-width:1.0417;"/></g><g class="participant participant-head" data-participant="AS"><rect fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" height="50.6083" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="162.089" x="755.2399" y="138.8611"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="126.6724" x="772.9482" y="169.1366">Activation Service</text></g><g class="participant participant-tail" data-participant="AS"><rect fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" height="50.6083" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="162.089" x="755.2399" y="2856.5267"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="126.6724" x="772.9482" y="2886.8022">Activation Service</text></g><g class="participant participant-head" data-participant="OldSP"><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="143.2373" x="1210.5459" y="180.5949">Old Service Provider</text><ellipse cx="1285.2895" cy="100.3194" fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" rx="8.3333" ry="8.3333" style="stroke:#2196F3;stroke-width:1.0417;"/><path d="M1285.2895,108.6528 L1285.2895,136.7778 M1271.7478,116.9861 L1298.8312,116.9861 M1285.2895,136.7778 L1271.7478,152.4028 M1285.2895,136.7778 L1298.8312,152.4028" fill="none" filter="url(#f1h8lp2igi9bm3)" style="stroke:#2196F3;stroke-width:1.0417;"/></g><g class="participant participant-tail" data-participant="OldSP"><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="143.2373" x="1210.5459" y="2879.5105">Old Service Provider</text><ellipse cx="1285.2895" cy="2901.9267" fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" rx="8.3333" ry="8.3333" style="stroke:#2196F3;stroke-width:1.0417;"/><path d="M1285.2895,2910.26 L1285.2895,2938.385 M1271.7478,2918.5933 L1298.8312,2918.5933 M1285.2895,2938.385 L1271.7478,2954.01 M1285.2895,2938.385 L1298.8312,2954.01" fill="none" filter="url(#f1h8lp2igi9bm3)" style="stroke:#2196F3;stroke-width:1.0417;"/></g><g class="participant participant-head" data-participant="DB"><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="65.5762" x="1391.2832" y="180.5949">Database</text><path d="M1408.4462,120.1111 C1408.4462,109.6944 1427.1962,109.6944 1427.1962,109.6944 C1427.1962,109.6944 1445.9462,109.6944 1445.9462,120.1111 L1445.9462,147.1944 C1445.9462,157.6111 1427.1962,157.6111 1427.1962,157.6111 C1427.1962,157.6111 1408.4462,157.6111 1408.4462,147.1944 L1408.4462,120.1111" fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#2196F3;stroke-width:1.5625;"/><path d="M1408.4462,120.1111 C1408.4462,130.5278 1427.1962,130.5278 1427.1962,130.5278 C1427.1962,130.5278 1445.9462,130.5278 1445.9462,120.1111" fill="none" style="stroke:#2196F3;stroke-width:1.5625;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="65.5762" x="1391.2832" y="2879.5105">Database</text><path d="M1408.4462,2902.9683 C1408.4462,2892.5517 1427.1962,2892.5517 1427.1962,2892.5517 C1427.1962,2892.5517 1445.9462,2892.5517 1445.9462,2902.9683 L1445.9462,2930.0517 C1445.9462,2940.4683 1427.1962,2940.4683 1427.1962,2940.4683 C1427.1962,2940.4683 1408.4462,2940.4683 1408.4462,2930.0517 L1408.4462,2902.9683" fill="url(#g1h8lp2igi9bm31)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#2196F3;stroke-width:1.5625;"/><path d="M1408.4462,2902.9683 C1408.4462,2913.385 1427.1962,2913.385 1427.1962,2913.385 C1427.1962,2913.385 1445.9462,2913.385 1445.9462,2902.9683" fill="none" style="stroke:#2196F3;stroke-width:1.5625;"/></g><g><title>**Activation Service**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="2585.6323" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="832.6385" y="261.5194"/></g><g><title>**Old Service Provider**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="116.4083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1280.0812" y="1112.6607"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="532.4443"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="633.6609"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="734.8775"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="900.2441"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="186.5499" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="1569.3522"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="2000.177"/></g><g><title>**Database**</title><rect fill="#FFFFFF" filter="url(#f1h8lp2igi9bm3)" height="50.6083" style="stroke:#CCCCCC;stroke-width:1.0417;" width="10.4167" x="1421.9879" y="2265.2852"/></g><g class="message" data-participant-1="NewSP" data-participant-2="AS"><polygon fill="#2196F3" points="820.1385,257.3527,830.5552,261.5194,820.1385,265.686,824.3052,261.5194" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="401.4048" x2="826.3885" y1="261.5194" y2="261.5194"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="419.1132" y="238.799">[1]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="37.1887" x="466.5863" y="231.2032">POST</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="175.885" x="508.1696" y="231.2032">/activations/takeover/{otp}</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="251.7578" x="466.5863" y="246.3949">(Take over an existing Payer activation)</text></g><path d="M847.9167,279.2277 L847.9167,346.936 A4.1667,4.1667 0 0 0 852.0833,351.1027 L1210.4167,351.1027 A4.1667,4.1667 0 0 0 1214.5833,346.936 L1214.5833,285.4777 L1204.1667,275.061 L852.0833,275.061 A4.1667,4.1667 0 0 0 847.9167,279.2277" fill="url(#g1h8lp2igi9bm32)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#9C27B0;stroke-width:1.0417;"/><path d="M1204.1667,275.061 L1204.1667,283.3944 A2.0833,2.0833 0 0 0 1206.25,285.4777 L1214.5833,285.4777 L1204.1667,275.061" fill="url(#g1h8lp2igi9bm32)" style="stroke:#9C27B0;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="74.7131" x="864.5833" y="303.2532">Operation:</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="106.1584" x="943.691" y="303.2532">`takeoverPayer`</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="324.4141" x="864.5833" y="318.4448">A new SP calls this to assume control of an existing</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="229.2847" x="864.5833" y="333.6365">activation and notify the original SP.</text><g class="message" data-participant-1="AS" data-participant-2="AS"><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="886.8052" y1="402.4943" y2="402.4943"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="886.8052" x2="886.8052" y1="402.4943" y2="416.036"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="844.0969" x2="886.8052" y1="416.036" y2="416.036"/><polygon fill="#2196F3" points="854.5135,411.8693,844.0969,416.036,854.5135,420.2026,850.3469,416.036" style="stroke:#2196F3;stroke-width:1.0417;"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="860.7635" y="387.3698">[2]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="319.0979" x="908.2367" y="387.3698">Validate Request &amp; Security Token (get `subject`)</text></g><g class="message" data-participant-1="AS" data-participant-2="DB"><polygon fill="#2196F3" points="1409.4879,528.2776,1419.9046,532.4443,1409.4879,536.6109,1413.6546,532.4443" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1415.7379" y1="532.4443" y2="532.4443"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="860.7635" y="517.3197">[3]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="50.9766" x="908.2367" y="517.3197">Redeem</text></g><g class="message" data-participant-1="DB" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,578.8859,844.0969,583.0526,854.5135,587.2192,850.3469,583.0526" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1426.1546" y1="583.0526" y2="583.0526"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="871.1802" y="567.9281">[4]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="296.7957" x="918.6534" y="567.9281">Return `TakeOverOtp` (contains `fiscalCode`)</text></g><g class="message" data-participant-1="AS" data-participant-2="DB"><polygon fill="#2196F3" points="1409.4879,629.4942,1419.9046,633.6609,1409.4879,637.8276,1413.6546,633.6609" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1415.7379" y1="633.6609" y2="633.6609"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="860.7635" y="618.5364">[5]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="129.2603" x="908.2367" y="618.5364">Search for the Payer</text></g><g class="message" data-participant-1="DB" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,680.1025,844.0969,684.2692,854.5135,688.4359,850.3469,684.2692" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1426.1546" y1="684.2692" y2="684.2692"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="871.1802" y="669.1447">[6]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="248.1995" x="918.6534" y="669.1447">Return the Payer (contains Old SP info)</text></g><g class="message" data-participant-1="AS" data-participant-2="DB"><polygon fill="#2196F3" points="1409.4879,730.7109,1419.9046,734.8775,1409.4879,739.0442,1413.6546,734.8775" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1415.7379" y1="734.8775" y2="734.8775"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="860.7635" y="719.753">[7]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="131.0242" x="908.2367" y="719.753">Deactivate the Payer</text></g><g class="message" data-participant-1="DB" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,781.3192,844.0969,785.4858,854.5135,789.6525,850.3469,785.4858" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1426.1546" y1="785.4858" y2="785.4858"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="871.1802" y="770.3613">[8]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="172.4731" x="918.6534" y="770.3613">Deactivation Acknowledged</text></g><g class="message" data-participant-1="AS" data-participant-2="AS"><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="886.8052" y1="836.0942" y2="836.0942"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="886.8052" x2="886.8052" y1="836.0942" y2="849.6358"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="844.0969" x2="886.8052" y1="849.6358" y2="849.6358"/><polygon fill="#2196F3" points="854.5135,845.4692,844.0969,849.6358,854.5135,853.8025,850.3469,849.6358" style="stroke:#2196F3;stroke-width:1.0417;"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="22.4731" x="860.7635" y="820.9696">[9]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="343.7195" x="908.2367" y="820.9696">Create new `Payer` object for the new SP (`subject`)</text></g><g class="message" data-participant-1="AS" data-participant-2="DB"><polygon fill="#2196F3" points="1409.4879,896.0775,1419.9046,900.2441,1409.4879,904.4108,1413.6546,900.2441" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1415.7379" y1="900.2441" y2="900.2441"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="860.7635" y="885.1196">[10]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="116.3879" x="917.1234" y="885.1196">Save new `Payer`</text></g><g class="message" data-participant-1="DB" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,946.6858,844.0969,950.8525,854.5135,955.0191,850.3469,950.8525" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1426.1546" y1="950.8525" y2="950.8525"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="871.1802" y="935.7279">[11]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="186.5662" x="927.5401" y="935.7279">New Payer saved successfully</text></g><path d="M34.375,966.4775 L411.3017,966.4775 L411.3017,994.1691 L400.885,1004.5858 L30.2083,1004.5858 L30.2083,970.6441 A4.1667,4.1667 0 0 1 34.375,966.4775" fill="#FFFFFF" style="stroke:#666666;stroke-width:1.0417;"/><rect fill="none" height="1873.3826" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1792.7124" x="30.2083" y="966.4775"/><text fill="#9C27B0" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="313.385" x="56.25" y="990.5029">Resilient Notification to Old Service Provider</text><path d="M686.4899,1011.8774 L780.2073,1011.8774 L780.2073,1039.5691 L769.7906,1049.9858 L682.3232,1049.9858 L682.3232,1016.0441 A4.1667,4.1667 0 0 1 686.4899,1011.8774" fill="#FFFFFF" style="stroke:#666666;stroke-width:1.0417;"/><rect fill="none" height="759.6497" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1130.1809" x="682.3232" y="1011.8774"/><text fill="#9C27B0" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="30.1758" x="708.3649" y="1035.9029">loop</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="207.7515" x="806.249" y="1036.9446">[3 times [Notification Retry]]</text><g class="message" data-participant-1="AS" data-participant-2="OldSP"><polygon fill="#2196F3" points="1267.5812,1108.4941,1277.9978,1112.6607,1267.5812,1116.8274,1271.7478,1112.6607" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1273.8312" y1="1112.6607" y2="1112.6607"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="860.7635" y="1097.5362">[12]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="37.1887" x="917.1234" y="1097.5362">POST</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="184.8022" x="958.7067" y="1097.5362">/v1/notifications/deactivation</text></g><path d="M696.9065,1128.2857 L778.7649,1128.2857 L778.7649,1155.9774 L768.3482,1166.394 L692.7399,1166.394 L692.7399,1132.4524 A4.1667,4.1667 0 0 1 696.9065,1128.2857" fill="#FFFFFF" style="stroke:#666666;stroke-width:1.0417;"/><rect fill="none" height="250.5249" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="698.5433" x="692.7399" y="1128.2857"/><text fill="#9C27B0" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="18.3167" x="718.7815" y="1152.3112">alt</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="69.2139" x="804.8065" y="1153.3529">[Success]</text><g class="message" data-participant-1="OldSP" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,1224.9023,844.0969,1229.069,854.5135,1233.2357,850.3469,1229.069" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1284.2478" y1="1229.069" y2="1229.069"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="871.1802" y="1213.9445">[13]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="227.7344" x="927.5401" y="1213.9445">200 OK (Notification Acknowledged)</text></g><path d="M707.3232,1244.694 L810.8551,1244.694 L810.8551,1272.3857 L800.4384,1282.8023 L703.1565,1282.8023 L703.1565,1248.8607 A4.1667,4.1667 0 0 1 707.3232,1244.694" fill="#FFFFFF" style="stroke:#666666;stroke-width:1.0417;"/><rect fill="none" height="126.825" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="677.71" x="703.1565" y="1244.694"/><text fill="#9C27B0" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="39.9902" x="729.1982" y="1268.7195">break</text><line style="stroke:#2196F3;stroke-width:1.0417;stroke-dasharray:2.0,2.0;" x1="703.1565" x2="1380.8665" y1="1283.844" y2="1283.844"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="62.03" x="718.7815" y="1306.8278">[Failure]</text><g class="message" data-participant-1="OldSP" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,1359.019,844.0969,1363.1856,854.5135,1367.3523,850.3469,1363.1856" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1284.2478" y1="1363.1856" y2="1363.1856"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="871.1802" y="1348.0611">[14]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="163.3545" x="927.5401" y="1348.0611">Error (e.g., Timeout, 5xx)</text></g><path d="M707.3232,1393.394 L789.1815,1393.394 L789.1815,1421.0856 L778.7649,1431.5023 L703.1565,1431.5023 L703.1565,1397.5606 A4.1667,4.1667 0 0 1 707.3232,1393.394" fill="#FFFFFF" style="stroke:#666666;stroke-width:1.0417;"/><rect fill="none" height="370.8415" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1098.9309" x="703.1565" y="1393.394"/><text fill="#9C27B0" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="18.3167" x="729.1982" y="1417.4194">alt</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="235.5042" x="815.2232" y="1418.4611">[Notification Failed Permanently]</text><path d="M847.9167,1461.2773 L847.9167,1514.4023 A4.1667,4.1667 0 0 0 852.0833,1518.5689 L1143.75,1518.5689 A4.1667,4.1667 0 0 0 1147.9167,1514.4023 L1147.9167,1467.5273 L1137.5,1457.1106 L852.0833,1457.1106 A4.1667,4.1667 0 0 0 847.9167,1461.2773" fill="url(#g1h8lp2igi9bm32)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#9C27B0;stroke-width:1.0417;"/><path d="M1137.5,1457.1106 L1137.5,1465.4439 A2.0833,2.0833 0 0 0 1139.5833,1467.5273 L1147.9167,1467.5273 L1137.5,1457.1106" fill="url(#g1h8lp2igi9bm32)" style="stroke:#9C27B0;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="205.2124" x="864.5833" y="1485.3027">All 3 notification attempts failed.</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="258.2336" x="864.5833" y="1500.4944">Logging the failure for offline processing.</text><g class="message" data-participant-1="AS" data-participant-2="DB"><polygon fill="#2196F3" points="1409.4879,1565.1855,1419.9046,1569.3522,1409.4879,1573.5189,1413.6546,1569.3522" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1415.7379" y1="1569.3522" y2="1569.3522"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="860.7635" y="1554.2277">[15]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="140.2771" x="917.1234" y="1554.2277">Save failedNotification</text></g><path d="M1437.5,1587.0605 L1437.5,1700.6022 A4.1667,4.1667 0 0 0 1441.6667,1704.7689 L1784.375,1704.7689 A4.1667,4.1667 0 0 0 1788.5417,1700.6022 L1788.5417,1593.3105 L1778.125,1582.8939 L1441.6667,1582.8939 A4.1667,4.1667 0 0 0 1437.5,1587.0605" fill="url(#g1h8lp2igi9bm32)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#9C27B0;stroke-width:1.0417;"/><path d="M1778.125,1582.8939 L1778.125,1591.2272 A2.0833,2.0833 0 0 0 1780.2083,1593.3105 L1788.5417,1593.3105 L1778.125,1582.8939" fill="url(#g1h8lp2igi9bm32)" style="stroke:#9C27B0;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="308.3374" x="1454.1667" y="1611.086">Write to `failed_takeover_notification` collection</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="117.1204" x="1454.1667" y="1626.2777">- old_activation_id</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="70.2881" x="1454.1667" y="1641.4693">- old_sp_id</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="122.5586" x="1454.1667" y="1656.661">- payer_fiscal_code</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="139.9109" x="1454.1667" y="1671.8526">- takeover_timestamp</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="104.425" x="1454.1667" y="1687.0443">- error_message</text><g class="message" data-participant-1="DB" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,1751.7354,844.0969,1755.9021,854.5135,1760.0688,850.3469,1755.9021" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1426.1546" y1="1755.9021" y2="1755.9021"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="871.1802" y="1740.7776">[16]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="91.9922" x="927.5401" y="1740.7776">Failure Logged</text></g><g class="message" data-participant-1="AS" data-participant-2="NewSP"><polygon fill="#2196F3" points="412.8632,1832.1187,402.4465,1836.2854,412.8632,1840.4521,408.6965,1836.2854" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="406.6132" x2="831.5969" y1="1836.2854" y2="1836.2854"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="429.5298" y="1813.5651">[17]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="85.5774" x="485.8897" y="1805.9692">201 Created</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="329.0405" x="485.8897" y="1821.1609">Header: `Location: /activations/{newActivationId}`</text></g><path d="M62.5,1853.9937 L62.5,1907.1187 A4.1667,4.1667 0 0 0 66.6667,1911.2854 L388.5417,1911.2854 A4.1667,4.1667 0 0 0 392.7083,1907.1187 L392.7083,1860.2437 L382.2917,1849.8271 L66.6667,1849.8271 A4.1667,4.1667 0 0 0 62.5,1853.9937" fill="url(#g1h8lp2igi9bm32)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#9C27B0;stroke-width:1.0417;"/><path d="M382.2917,1849.8271 L382.2917,1858.1604 A2.0833,2.0833 0 0 0 384.375,1860.2437 L392.7083,1860.2437 L382.2917,1849.8271" fill="url(#g1h8lp2igi9bm32)" style="stroke:#9C27B0;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="183.7341" x="79.1667" y="1878.0192">The takeover was successful.</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="287.8296" x="79.1667" y="1893.2109">The Payer is now associated with the new SP.</text><line style="stroke:#2196F3;stroke-width:1.0417;stroke-dasharray:2.0,2.0;" x1="30.2083" x2="1822.9207" y1="1920.8354" y2="1920.8354"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="6.7932" x="45.8333" y="1943.8192">[</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="279.9805" x="52.6265" y="1943.8192">Failure: Invalid OTP or Payer Not Found</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="6.7932" x="332.607" y="1943.8192">]</text><g class="message" data-participant-1="AS" data-participant-2="DB"><polygon fill="#2196F3" points="1409.4879,1996.0103,1419.9046,2000.177,1409.4879,2004.3437,1413.6546,2000.177" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1415.7379" y1="2000.177" y2="2000.177"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="860.7635" y="1985.0525">[18]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="50.9766" x="917.1234" y="1985.0525">Reedem</text></g><g class="message" data-participant-1="DB" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,2046.6187,844.0969,2050.7853,854.5135,2054.952,850.3469,2050.7853" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1426.1546" y1="2050.7853" y2="2050.7853"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="871.1802" y="2035.6608">[19]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="40.7898" x="927.5401" y="2035.6608">Error:</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="285.3699" x="972.7244" y="2035.6608">OTP not found, expired, or already redeemed</text></g><g class="message" data-participant-1="AS" data-participant-2="NewSP"><polygon fill="#2196F3" points="412.8632,2097.227,402.4465,2101.3936,412.8632,2105.5603,408.6965,2101.3936" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="406.6132" x2="831.5969" y1="2101.3936" y2="2101.3936"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="429.5298" y="2086.2691">[20]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="125.4089" x="485.8897" y="2086.2691">401 Unauthorized</text></g><path d="M84.375,2119.102 L84.375,2172.227 A4.1667,4.1667 0 0 0 88.5417,2176.3936 L387.5,2176.3936 A4.1667,4.1667 0 0 0 391.6667,2172.227 L391.6667,2125.352 L381.25,2114.9353 L88.5417,2114.9353 A4.1667,4.1667 0 0 0 84.375,2119.102" fill="url(#g1h8lp2igi9bm32)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#9C27B0;stroke-width:1.0417;"/><path d="M381.25,2114.9353 L381.25,2123.2686 A2.0833,2.0833 0 0 0 383.3333,2125.352 L391.6667,2125.352 L381.25,2114.9353" fill="url(#g1h8lp2igi9bm32)" style="stroke:#9C27B0;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="265.5579" x="101.0417" y="2143.1274">The provided OTP is invalid or has already</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="261.6699" x="101.0417" y="2158.3191">been used. The takeover cannot proceed.</text><line style="stroke:#2196F3;stroke-width:1.0417;stroke-dasharray:2.0,2.0;" x1="30.2083" x2="1822.9207" y1="2185.9436" y2="2185.9436"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="6.7932" x="45.8333" y="2208.9274">[</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="181.9946" x="52.6265" y="2208.9274">Failure: Subject Mismatch</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="6.7932" x="234.6212" y="2208.9274">]</text><g class="message" data-participant-1="AS" data-participant-2="DB"><polygon fill="#2196F3" points="1409.4879,2261.1186,1419.9046,2265.2852,1409.4879,2269.4519,1413.6546,2265.2852" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="1415.7379" y1="2265.2852" y2="2265.2852"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="860.7635" y="2250.1607">[21]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="50.9766" x="917.1234" y="2250.1607">Reedem</text></g><g class="message" data-participant-1="DB" data-participant-2="AS"><polygon fill="#2196F3" points="854.5135,2311.7269,844.0969,2315.8936,854.5135,2320.0602,850.3469,2315.8936" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="848.2635" x2="1426.1546" y1="2315.8936" y2="2315.8936"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="871.1802" y="2300.769">[22]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="40.7898" x="927.5401" y="2300.769">Error:</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="241.3635" x="972.7244" y="2300.769">OTP subject does not match requester</text></g><g class="message" data-participant-1="AS" data-participant-2="NewSP"><polygon fill="#2196F3" points="412.8632,2362.3352,402.4465,2366.5019,412.8632,2370.6685,408.6965,2366.5019" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="406.6132" x2="831.5969" y1="2366.5019" y2="2366.5019"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="429.5298" y="2351.3774">[23]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="101.5564" x="485.8897" y="2351.3774">403 Forbidden</text></g><path d="M40.625,2384.2102 L40.625,2437.3352 A4.1667,4.1667 0 0 0 44.7917,2441.5019 L387.5,2441.5019 A4.1667,4.1667 0 0 0 391.6667,2437.3352 L391.6667,2390.4602 L381.25,2380.0435 L44.7917,2380.0435 A4.1667,4.1667 0 0 0 40.625,2384.2102" fill="url(#g1h8lp2igi9bm32)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#9C27B0;stroke-width:1.0417;"/><path d="M381.25,2380.0435 L381.25,2388.3769 A2.0833,2.0833 0 0 0 383.3333,2390.4602 L391.6667,2390.4602 L381.25,2380.0435" fill="url(#g1h8lp2igi9bm32)" style="stroke:#9C27B0;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="247.8516" x="57.2917" y="2408.2357">You are not authorized to use this OTP.</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="309.198" x="57.2917" y="2423.4273">It was generated for a different Service Provider.</text><line style="stroke:#2196F3;stroke-width:1.0417;stroke-dasharray:2.0,2.0;" x1="30.2083" x2="1822.9207" y1="2451.0518" y2="2451.0518"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="6.7932" x="45.8333" y="2474.0356">[</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="87.1887" x="52.6265" y="2474.0356">Other Errors</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="6.7932" x="139.8153" y="2474.0356">]</text><path d="M306.25,2495.4102 L493.925,2495.4102 L493.925,2523.1018 L483.5083,2533.5185 L302.0833,2533.5185 L302.0833,2499.5768 A4.1667,4.1667 0 0 1 306.25,2495.4102" fill="#FFFFFF" style="stroke:#666666;stroke-width:1.0417;"/><rect fill="none" height="169.7083" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="670.4539" x="302.0833" y="2495.4102"/><text fill="#9C27B0" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="124.1333" x="328.125" y="2519.4356">Client-Side Errors</text><g class="message" data-participant-1="AS" data-participant-2="NewSP"><polygon fill="#2196F3" points="412.8632,2586.8184,402.4465,2590.9851,412.8632,2595.1518,408.6965,2590.9851" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="406.6132" x2="831.5969" y1="2590.9851" y2="2590.9851"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="429.5298" y="2568.2648">[24]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="118.9514" x="485.8897" y="2560.6689">400 Bad Request</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="201.1963" x="485.8897" y="2575.8606">(e.g., malformed UUID for OTP)</text></g><g class="message" data-participant-1="AS" data-participant-2="NewSP"><polygon fill="#2196F3" points="412.8632,2652.6184,402.4465,2656.7851,412.8632,2660.9517,408.6965,2656.7851" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="406.6132" x2="831.5969" y1="2656.7851" y2="2656.7851"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="429.5298" y="2634.0647">[25]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="125.4089" x="485.8897" y="2626.4689">401 Unauthorized</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="249.2126" x="485.8897" y="2641.6606">(e.g., Invalid or expired security token)</text></g><path d="M306.25,2679.7017 L492.0512,2679.7017 L492.0512,2707.3934 L481.6345,2717.8101 L302.0833,2717.8101 L302.0833,2683.8684 A4.1667,4.1667 0 0 1 306.25,2679.7017" fill="#FFFFFF" style="stroke:#666666;stroke-width:1.0417;"/><rect fill="none" height="152.8666" rx="4.1667" ry="4.1667" style="stroke:#2196F3;stroke-width:1.0417;" width="1153.5594" x="302.0833" y="2679.7017"/><text fill="#9C27B0" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="122.2595" x="328.125" y="2703.7272">Server-Side Error</text><g class="message" data-participant-1="AS" data-participant-2="AS"><line style="stroke:#2196F3;stroke-width:3.125;" x1="843.0552" x2="886.8052" y1="2760.085" y2="2760.085"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="886.8052" x2="886.8052" y1="2760.085" y2="2773.6267"/><line style="stroke:#2196F3;stroke-width:3.125;" x1="844.0969" x2="886.8052" y1="2773.6267" y2="2773.6267"/><polygon fill="#2196F3" points="854.5135,2769.46,844.0969,2773.6267,854.5135,2777.7934,850.3469,2773.6267" style="stroke:#2196F3;stroke-width:1.0417;"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="860.7635" y="2744.9605">[26]</text><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="225.9033" x="917.1234" y="2744.9605">An unexpected internal error occurs</text></g><path d="M1176.0132,2729.2684 L1176.0132,2766.7684 A4.1667,4.1667 0 0 0 1180.1799,2770.9351 L1427.0549,2770.9351 A4.1667,4.1667 0 0 0 1431.2215,2766.7684 L1431.2215,2735.5184 L1420.8049,2725.1017 L1180.1799,2725.1017 A4.1667,4.1667 0 0 0 1176.0132,2729.2684" fill="url(#g1h8lp2igi9bm32)" filter="url(#f1h8lp2igi9bm3)" style="stroke:#9C27B0;stroke-width:1.0417;"/><path d="M1420.8049,2725.1017 L1420.8049,2733.4351 A2.0833,2.0833 0 0 0 1422.8882,2735.5184 L1431.2215,2735.5184 L1420.8049,2725.1017" fill="url(#g1h8lp2igi9bm32)" style="stroke:#9C27B0;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="212.616" x="1192.6799" y="2753.2939">e.g., Database connection failure.</text><g class="message" data-participant-1="AS" data-participant-2="NewSP"><polygon fill="#2196F3" points="412.8632,2820.0684,402.4465,2824.235,412.8632,2828.4017,408.6965,2824.235" style="stroke:#2196F3;stroke-width:1.0417;"/><line style="stroke:#2196F3;stroke-width:3.125;stroke-dasharray:2.0,2.0;" x1="406.6132" x2="831.5969" y1="2824.235" y2="2824.235"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="31.3599" x="429.5298" y="2809.1105">[27]</text><text fill="#222222" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="178.7354" x="485.8897" y="2809.1105">500 Internal Server Error</text></g><!--SRC=[hLTjRzis4FwkNt5BWJKH4iTjrY_6Li29LynOsnXnqc5eYvYMJZONcjGeAcbMzB_lZfGioN5UDbHVueZalJptyBdJSvWeeTt5kxSmac9XnGeoO-7iV08JSOiMpiKLcclwCPoCuKQw9PnX8PL4xU2zSJAJYN3IwEWvd4kdS00NcbvYwcsiJq_nxn9rWhKNslu1RK471t3Kw_Vwz6A4HM9bxlpBywKi8Ar2AfRcfW2tH72rmToQ18jY7wHEL9bAlG01jWwDh7KUtOeKLfWiXPR5AkHZqLc91GYTaedHCIYpy21aGggIJFQYw0VolK9O2OTMYYXodAhFS9WuUHti4a83c9nEp-5GhDyMXtN8Xr-Doxz54QsHyPquVeytX8kzbWJBn9fhcQADunqG1T3IT1BbmZgPo9mAnFjRhgfZrUxXj35wgjBxZD8I6Ks54tDH86yULR-h3QDZYgvqHfUhEK6yy_FyzSV-vvqeyk70mMloD80uvXpZ-A4iF-bTBZtuKWaD-4KMZciKIDKSt8kgtyXPH5Gd12iNImScupT0xavpj7xpW9pEQaVUqems344pa1D8X5BC4YAECvHFKLB94gETDOhDjUAWOqqCllAU8RUUOuO2a5eeijcBCAnX50sdDG8VX98fXtp6h2uS_4YG9wMLxXREpHLgs5sWWrbHpl_2nCts25Rbu5ak52uiqdeSJyk4-Gid1F-WkISdPfKhT5IHA6BY1gUZum7vIX5N_kKQCYeO_q-SFQX2EqDNMWqpDdXA1azTFeDT1a58NS0iamN1T69IfAZuR8fjQni-foXiilINWO7na3ynWlN-bdVFpGdTsCmymVceMNooy_KPVn-JAsrk5AOBJ1zsnqTFBF82SsaMk0N6bs-TVaMptLPTsSGcPkAwO-Mna5a50b05dKoX2CJ8IgLkxulwEVpolv_AG12V98ZjTac7jsOXa-_ZS65DcT_dXsxhDjbgqEL76PF34JYv8gt-s3bFbBEtdwEsu8TwUCLhAzRrYyDsAoWEqnPXEWRMc0VLR2zrz_75dXzbsVm8gZiTmSRZJQmB_hBVXzFVORUJGfkhUtSCj2XmDnn-vaJUgyvRL2Jnpx8C-nJOcz397WdiLsk9wRlOM_JsgPclq9Hk7rvz-V8V0oB9ZBRzZZgOPLcIfY-xHE0uwGfCqAw49ffKDw3LnJUxG_SPAaKKwJHxuHokSbVuRevfxyuP8lc2EnFVyAhZ-njlian9ZVMWGLjwcrc6nd0lDJOq8GJGcPcs4gwIYEr9RopoymVr7UGxD0iUBkiEUTa6OaQTKAbmuU-OE02Zqilc9bpAz9uzHRvzBMS5kmpTvJAXzh9bppekVuUTMELRDY6Jy9BM2x70nm5l2Mb5SbzGxCRObT1DRlBVjOYJCJ_ji6gyxB-esa8Qnv_qRoX8bGOmUsi2feFk2FILLB-PqSRfjw3zle0ACr-_CDZL4Pot9zeRci0QyUzrDeK6GOCDYGHFDYQH75KOO9lUr8iwG4L111IJvnQLehDnNC4qWB6-vZa6JccA9Ru75qHFU6DAdMuRG6W2UNG0YMCl8pogiM6AWsuJsTkdsIkN5ka7EHEAO4rlQVRceURXzjoko4zKaGjDC-gIXhH_k2nFWJWF3IMaIY3AAdCAP4cWLy6iZynvGYiB4ejkWHAXEHql2BMIR69jhD0BRCCy3SC2lACF3k6IvNS2jff183LOU9IzSGBKJwHLytmIejGUZ9tBD4NzE9n_cX84NJBss9I1rOS02xCtHTUGT-myhnUeUOQddIojWZxig3DP7WGsc_vsM5DXhuWh_350RBUXLHKrb66uEF6JnS6Kh5JhKLk9kqdtuLYazVpEbxjgUokXA49Y95nSZ4S-Mifdxm5BcuHScnetBAke3qNzbU3uAs5ldQfFe9qBeuAsbKlKRIfCY26HL9DbOW6PbfgApXyjNa319EIf0Q1f8br9zO7MNu7yhQH3XwWxOI-wLtqtaNX5c8xh84By8VIALAqylU2sk3cS_Wi0]--></g></svg>